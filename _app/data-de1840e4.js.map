{"version":3,"file":"data-de1840e4.js","sources":["../../unoptimized/client/_app/components/data.js"],"sourcesContent":["import { writable } from \"../../web_modules/svelte/store.js\";\n\nconst defaultValue = [];\nconst delimiter = \"|\";\nconst filterColumns = [\"gender\", \"size\", \"season\", \"brand\"];\n\nconst arrayToObject = (array, headers) => {\n  const result = {};\n  for (let i = 0; i < array.length; i++) result[headers[i]] = array[i];\n  return result;\n};\n\nconst createBoty = () => {\n  const { subscribe, set } = writable(defaultValue);\n\n  const load = async ({ fetch }) => {\n    const res = await fetch(`/boty/boty.csv`);\n    const botyFile = await res.text();\n\n    const [headerLine, ...botyLines] = botyFile.split(/\\r?\\n/);\n    const headers = headerLine.split(\"|\").map((x) => x.trim());\n\n    const boty = botyLines\n      .filter((x) => x)\n      .map((x) => x.split(delimiter).map((x) => x.trim()))\n      .map((x) => arrayToObject(x, headers));\n\n    // const getColumnValues = (columnName) =>\n    //   Object.keys(\n    //     boty.reduce((acc, cur) => {\n    //       const columnValue = cur[columnName];\n    //       if (!acc[columnValue]) acc[columnValue] = true;\n    //       return acc;\n    //     }, [])\n    //   );\n\n    // const options = headers\n    //   .filter((x) => filterColumns.includes(x))\n    //   .reduce((acc, cur) => {\n    //     acc[cur] = getColumnValues(cur);\n    //     return acc;\n    //   }, {});\n\n    const result = { boty };\n    set(result);\n    return { boty };\n  };\n\n  return {\n    subscribe,\n    reset: () => set(defaultValue),\n    load,\n    set,\n  };\n};\n\nexport const boty = createBoty();\n"],"names":["defaultValue","boty","subscribe","set","writable","reset","load","async","fetch","res","botyFile","text","headerLine","botyLines","split","headers","map","x","trim","filter","array","result","i","length","arrayToObject","createBoty"],"mappings":"6CAEA,MAAMA,EAAe,GAsDRC,EA5CM,MACjB,MAAMC,UAAEA,EAASC,IAAEA,GAAQC,EAASJ,GAmCpC,MAAO,CACLE,UAAAA,EACAG,MAAO,IAAMF,EAAIH,GACjBM,KApCWC,OAASC,MAAAA,MACpB,MAAMC,QAAYD,EAAM,kBAClBE,QAAiBD,EAAIE,QAEpBC,KAAeC,GAAaH,EAASI,MAAM,SAC5CC,EAAUH,EAAWE,MAAM,KAAKE,KAAKC,GAAMA,EAAEC,SAE7CjB,EAAOY,EACVM,QAAQF,GAAMA,IACdD,KAAKC,GAAMA,EAAEH,MArBF,KAqBmBE,KAAKC,GAAMA,EAAEC,WAC3CF,KAAKC,GAnBU,EAACG,EAAOL,KAC5B,MAAMM,EAAS,GACf,IAAK,IAAIC,EAAI,EAAGA,EAAIF,EAAMG,OAAQD,IAAKD,EAAON,EAAQO,IAAMF,EAAME,GAClE,OAAOD,GAgBSG,CAAcP,EAAGF,KAoB/B,OADAZ,EADe,CAAEF,KAAAA,IAEV,CAAEA,KAAAA,IAOTE,IAAAA,IAIgBsB"}